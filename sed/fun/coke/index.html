<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>4906.org &gt; SED &gt; Fun stuff &gt; Share a Coke</title>
  <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon.png"/>
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/>
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/>
  <link rel="manifest" href="/site.webmanifest"/>
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"/>
  <link rel="stylesheet" href="/index.css"/>
  <meta name="msapplication-TileColor" content="#da532c"/>
  <meta name="theme-color" content="#ffffff"/>
  <meta property="og:type" content="website"/>
  <meta property="og:url" content="https://4906.org/sed/fun/coke"/>
  <meta property="og:title" content="Share a Coke"/>
  <meta property="og:description" content="A way to stick it to the Coca-Cola company for inserting a political agenda into their generator."/>
  <meta property="og:image" content="https://4906.org/m/cokepreview.png"/>
</head>
<body>
  <style>
  body {
    background-color: black;
    color: white;
  }
  </style>
  <script>
    function determinesizeandpos(character) {
      switch(character) {

      }
      return [xsz,ysz]
    }
    function makeithappen() {
      const inputbox = document.getElementById('textbox');
      const s = inputbox.value;
  		const canvas = document.getElementById('tinycanvas');
  		const ctx = canvas.getContext('2d');
  		const img = new Image();
      xs=0;
      xsm=0;
      ys=1;
      for(i=0;i<s.length;i++) {
        if(32 <= s.charCodeAt(i) <= 126){
          if(s[i] == '\n') {ys++;xs=0;}
          else {
            xs++;
            if(xsm < xs) xsm = xs;
          }
        }
      }
      canvas.width = xsm*4;
      canvas.height = ys*6;
  		img.onload = () => {
        x=0;
        y=0;
  			for(i=0;i<s.length;i++) {
            if(32 <= s.charCodeAt(i) <= 126){
  				if(s[i] == '\n') {y++; x=0;}
  				else {ctx.drawImage(img, Math.min(s.charCodeAt(i)*4, 127*4), 0, 4, 6, x*4, y*6, 4, 6)
          x++};
          }
  			}
  		}
  		img.onerror = err => { throw err }
      img.src = 'response.png';
  	}
  </script>
  <a href="..">&#xf56c;Back</a><br/>
  Write in the text box and stick it to the Coca-Cola company!<br/>
  <textarea id="textbox"></textarea>
  <button onclick="makeithappen(true)">Share a coke</button>
  <canvas id="tinycanvas"/>
</body>
</html>
